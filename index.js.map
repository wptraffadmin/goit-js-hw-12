{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48154537-527b84123da1832c7b7680c8e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${query}&page=${1}&per_page=${15}&image_type=photo&orientation=horizontal&safesearch=true`;\n    \n   try {\n    const response = await axios.get(url);\n\n    // Перевірка статусу відповіді\n    if (response.status !== 200) {\n      throw new Error('Failed to fetch images');\n    }\n\n    // Повертаємо масив зображень\n    return response.data.hits;\n  } catch (error) {\n    console.error(error.message || 'Something went wrong!');\n    throw new Error('Something went wrong!');\n  }\n}\n","import axios from 'axios';\n\nlet currentPage = 1;  // Початкова сторінка\n\n// Функція для отримання зображень з API\nexport async function fetchImages(query) {\n    const API_KEY = '48154537-527b84123da1832c7b7680c8e';\n    const BASE_URL = 'https://pixabay.com/api/';\n    \n    const url = `${BASE_URL}?key=${API_KEY}&q=${query}&page=${currentPage}&per_page=${15}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    try {\n        const response = await axios.get(url);\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n        \n        // Повертає масив зображень та загальну кількість\n        return {\n            images: response.data.hits,\n            totalHits: response.data.totalHits\n        };\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong while fetching images!',\n        });\n    }\n}\n\n// Функція для рендерингу зображень\nexport function renderImages(images, totalHits) {\n    const gallery = document.querySelector('.gallery');\n    \n    if (images.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n    }\n\n    const imageMarkup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a href=\"${largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"info\">\n                <p><strong>Likes:</strong> <br> ${likes}</p>\n                <p><strong>Views:</strong> <br> ${views}</p>\n                <p><strong>Comments:</strong> <br> ${comments}</p>\n                <p><strong>Downloads:</strong> <br> ${downloads}</p>\n            </div>\n        </a>\n    `).join('');\n\n    // Додаємо HTML розмітку галереї\n    gallery.insertAdjacentHTML('beforeend', imageMarkup);\n\n    // Додаємо кнопку для завантаження додаткових зображень\n    renderLoadMoreButton(gallery, totalHits);\n}\n\n// Функція для прокрутки до першого елемента нової сторінки\nexport function scrollPageSmoothly() {\n    // Отримуємо всі елементи галереї\n    const galleryItems = document.querySelectorAll('.gallery-item');\n\n    // Перевірка наявності елементів\n    if (galleryItems.length > 0) {\n        const firstNewItem = galleryItems[galleryItems.length - 1]; // Останній елемент (останнє завантажене зображення)\n\n        // Отримуємо висоту одного елемента галереї\n        const itemHeight = firstNewItem.getBoundingClientRect().height;\n\n        // Прокручуємо сторінку на дві висоти елемента\n        window.scrollBy({\n            top: itemHeight * 2,  // Прокручувати на 2 висоти елемента\n            behavior: 'smooth'    // Плавне прокручування\n        });\n    }\n}\n\n// Функція для відображення індикатора завантаження\nexport function showLoadingIndicator() {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('visible');\n}\n\n// Функція для приховування індикатора завантаження\nexport function hideLoadingIndicator() {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('visible');\n}\n\n// Функція для рендерингу кнопки \"Load More\"\nexport function renderLoadMoreButton(gallery, totalHits) {\n    const existingButton = document.querySelector('.load-more-btn');\n    if (existingButton) return; // Якщо кнопка вже існує, не додаємо нову\n\n    // Перевірка на досягнення кінця результатів\n    if (currentPage * 15 >= totalHits) {\n        gallery.insertAdjacentHTML('afterend', `\n            <p class=\"end-message\">We're sorry, but you've reached the end of search results.</p>\n        `);\n        return;\n    }\n\n    const buttonMarkup = `\n        <button class=\"load-more-btn\">Load More</button>\n    `;\n    \n    gallery.insertAdjacentHTML('afterend', buttonMarkup);\n\n    // Додаємо обробник події для кнопки\n    const loadMoreBtn = document.querySelector('.load-more-btn');\n\n    loadMoreBtn.addEventListener('click', async () => {\n        // Отримуємо наступну сторінку зображень\n        currentPage += 1;  // Збільшуємо поточну сторінку\n        const query = 'nature'; // Це можна змінити на змінну, яка містить поточний запит\n        const { images, totalHits } = await fetchImages(query); // Отримуємо нові зображення та totalHits\n        renderImages(images, totalHits); // Рендеримо нові зображення\n\n        // Викликаємо прокрутку\n        scrollPageSmoothly();\n    });\n}\n","import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showLoadingIndicator, hideLoadingIndicator } from './js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const searchButton = document.querySelector('#search-button');\n    const searchInput = document.querySelector('#search-input');\n\n    // Перевірка, чи елементи існують перед додаванням слухачів\n    if (!searchButton || !searchInput) {\n        console.error('Elements not found');\n        return;\n    }\n\n    // Ініціалізація SimpleLightbox\n    let lightbox = new SimpleLightbox('.gallery a');\n\n    const performSearch = () => {\n        const query = searchInput.value.trim();\n        if (query === '') {\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Please enter a search query.',\n            });\n            return;\n        }\n        \n        // Очищаємо галерею з попереднім результатом пошуку\n        const gallery = document.querySelector('.gallery');\n        gallery.innerHTML = '';\n\n        // Показуємо індикатор завантаження\n        showLoadingIndicator();\n\n        fetchImages(query)\n            .then(images => {\n                // Приховуємо індикатор завантаження\n                hideLoadingIndicator();\n\n                // Відображаємо отримані зображення\n                renderImages(images);\n\n                // Оновлюємо SimpleLightbox після додавання нових зображень\n                lightbox.refresh();\n            })\n            .catch(error => {\n                // Приховуємо індикатор завантаження у разі помилки\n                hideLoadingIndicator();\n                iziToast.error({\n                    title: 'Error',\n                    message: error.message,\n                });\n            });\n    };\n    // Викликаємо функцію performSearch при натисканні кнопки або Enter\n    const searchHandler = (event) => {\n        if (event.type === 'click' || event.key === 'Enter') {\n            performSearch();\n        }\n    };\n\n    // Додаємо слухачі подій\n    searchButton.addEventListener('click', searchHandler);\n    searchInput.addEventListener('keydown', searchHandler);\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","url","response","axios","error","currentPage","renderImages","images","totalHits","gallery","imageMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderLoadMoreButton","scrollPageSmoothly","galleryItems","itemHeight","showLoadingIndicator","hideLoadingIndicator","searchButton","searchInput","lightbox","SimpleLightbox","performSearch","iziToast","searchHandler","event"],"mappings":"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"}